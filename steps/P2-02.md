# 演習２) タスク２ - ACR 接続情報を追加

**注意!**

- 

---

## 作業
- `env` とその下に `CONTAINER_REGISTRY` を追加し、ACR のドメイン (~.azurecr.io) を設定
  ```yaml
  # Add env
  env:
    CONTAINER_REGISTRY:  # ACR のドメイン (~.azurecr.io) を設定
  ```
- 下記 `step` を `.github/workflows/build-deploy.yml` ファイルの末尾に追加 (インデント注意)
  ```yaml
      # Add a step
      - name: Log in to container registry
        uses: docker/login-action@v1
        with:
          registry: ${{ env.CONTAINER_REGISTRY }}
          username: ${{ secrets.CONTAINER_REGISTRY_USERNAME }}
          password: ${{ secrets.CONTAINER_REGISTRY_PASSWORD }}
  ```
  > **注:** インデントを注意してください。

- リポジトリの `Secrets` に `CONTAINER_REGISTRY_USERNAME` と `CONTAINER_REGISTRY_PASSWORD` を追加し、ACR のユーザー名とパスワード (アクセス キー ) を設定。
TODO ? GitHub、Azureの操作手順？



## 確認
手動実行で動作確認し、ACR へのログインも含め正常終了であれば OK

![Handson architecture](../images/sample-architecture.png)

## 参照情報

- <a href="https://docs.microsoft.com/ja-jp/azure/container-registry/container-registry-intro" target="_blank">Azure における Container Registry の概要</a>

- **GitHub**

    - <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository" target="_blank">Creating encrypted secrets for a repository</a>
