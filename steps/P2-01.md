# 演習２) タスク１ - GitHub アクション雛形を作成

## 作業
- GitHub リポジトリにて新規ファイルを作成
  <img src="../images/P2-01-01.png" width="500">
- 下記コードをコピーして、 `.github/workflows/build-deploy.yml` として作成する
  <img src="../images/P2-01-02.png" width="500">

  ```yaml
  name: Trigger auto deployment
  on:
    # 手動実行用トリガー
    workflow_dispatch:      
  jobs:
    build:
      runs-on: ubuntu-18.04
      steps:
        - name: Checkout to the branch
          uses: actions/checkout@v2

        - name: Set up Docker Buildx
          uses: docker/setup-buildx-action@v1

        - name: Set repository name to env
          run: | 
            echo "REPOSITORY_NAME=${GITHUB_REPOSITORY#${GITHUB_REPOSITORY_OWNER}/}" >> $GITHUB_ENV

        - name: Confirm if env have REPOSITORY_NAME
          run: |
            echo ${{ env.REPOSITORY_NAME }}
  ```

  > **注:** インデントを注意してください。

## 確認
- main ブランチに build-deploy.yml ファイルが正常に作成されている
  <img src="../images/P2-01-03.png" width="500">
- 手動実行でワークフローを起動
  <img src="../images/P2-01-04.png" width="500">
- ワークフロー処理はエラーなく終了し、build ジョブのログにリポジトリ名が出力されていることを確認  
  <img src="../images/P2-01-05.png" width="500">
  <img src="../images/P2-01-06.png" width="500">
  <img src="../images/P2-01-07.png" width="500">

## 参照情報

- <a href="https://docs.microsoft.com/devops/what-is-devops" target="_blank">What is DevOps?</a>

- **GitHub**

    - <a href="https://docs.github.com/en/actions/quickstart" target="_blank">Quickstart for GitHub Actions</a>
    - <a href="https://docs.github.com/en/repositories/working-with-files/managing-files/creating-new-files" target="_blank">Creating new files</a>
    - <a href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/using-workflow-run-logs#viewing-logs-to-diagnose-failures" target="_blank">Viewing logs to diagnose failures</a>
